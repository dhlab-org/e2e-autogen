# 📊 테스트 결과 및 커버리지 활용 가이드

E2E Autogen은 테스트 실행 결과를 Google Sheets에 자동 기록하고, 이를 기반으로 커버리지 분석을 제공합니다.

## 1. 결과 기록 방식
- **위치**: 기존 시트의 마지막 컬럼 뒤에 자동 추가됩니다.
- **구조**: 결과 + 실행 날짜/시간 컬럼으로 구성됩니다
- **드롭다운 지원**: 결과 컬럼은 선택 가능한 드롭다운 메뉴를 제공합니다.

## 2. 지원 결과 유형
| 결과 코드             | 의미                    | 예시        |
| ----------------- | --------------------- | --------- |
| ✅ `pass`          | 테스트 성공                | 정상 동작     |
| ❌ `fail`          | 테스트 실패                | 오류 발생     |
| ⚠️ `flaky`        | 불안정 (첫 시도 실패, 재시도 성공) | 네트워크 불안정  |
| ⏭️ `not_executed` | 미실행                   | 스킵됨       |
| 📝 `manual_only`  | 자동화 불가 → 수동 검증 필요     | UI 시각적 검증 |


## 3. 커스텀 리포터 기능
- **테스트 스텝별 상태 추적** — 각 step의 성공/실패/재시도 상태를 기록  
- **Flaky 테스트 감지** — 재시도 결과가 혼재하면 자동 `flaky` 표시  
- **Manual 테스트 지원** — `manual_only`로 수동 검증 대상 분리  
- **상세 메타데이터 수집** — 실행 시간, 에러 메시지, 테스트 ID 등


## 4. 커버리지 분석

### 4.1 제공 지표
- **전체 요약**: 총 스위트 수, 시나리오 수, 테스트케이스 수, 실행률, 성공률
- **상태별 통계**: pass / fail / flaky / not_executed / manual_only
- **대분류별 분석**: `[TC-x]` 단위 커버리지 통계

### 4.2 커버리지 시트 자동 생성
`npx e2e-autogen update` 실행 시 `[COVERAGE]` 시트가 자동 생성:
- 실행 날짜 및 시간
- 전체 커버리지 요약
- 스위트별 상세 통계
- 시간별 커버리지 변화 추이

## 5. 주의사항
- 서비스 계정에 **Editor 권한**이 필요합니다.
- 커스텀 리포터 설정이 필수입니다.
- 각 시트명은 `[TC-x]` 형식을 따라야 합니다.


## 6. 결과 해석 및 활용 가이드

`update`를 실행할 때마다 **새 컬럼이 추가**되므로, 각 테스트케이스의 결과 변화를 **시간 흐름에 따라 추적**할 수 있습니다.

### 6.1 누적 결과 해석 예시
| 실행 1 | 실행 2 | 실행 3 | 실행 4 | 해석 |
|--------|--------|--------|--------|------|
| flaky  | pass   | fail   | flaky  | 기능은 정상 동작하지만, 테스트 코드나 환경 불안정 가능성이 높음 |
| fail   | fail   | pass   | pass   | 코드 수정 후 안정화된 케이스 |
| pass   | pass   | pass   | pass   | 안정적인 테스트 |

### 6.2 활용 포인트
- **flaky 패턴 식별**  
  - 반복 실행 결과가 `flaky → pass → fail → flaky`처럼 들쑥날쑥하면,  
    기능 문제보다는 **테스트 코드/환경의 신뢰성** 개선이 필요합니다.
- **회귀(regression) 추적**  
  - `pass` 상태였던 케이스가 이후 `fail`로 변하면, 최근 코드 변경의 영향 가능성이 큽니다.
- **안정화 지표**  
  - 여러 실행에서 연속 `pass`가 나오면, 해당 기능과 테스트가 안정화된 것으로 판단할 수 있습니다.

💡 **Tip**: PM/QA 입장에서는 한 번의 결과보다, **여러 실행에 걸친 패턴**을 보는 것이 더 중요합니다.  
개발자는 이 패턴을 보고 테스트 로직, Mock 환경, 비동기 처리 타이밍 등을 개선할 수 있습니다.